webpackJsonp([1],{"7zck":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("7+uW"),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",{attrs:{id:"app"}},[t("router-view"),this._v(" "),t("widgeFooter")],1)},staticRenderFns:[]};var n=a("VU/8")({name:"App"},r,!1,function(e){a("vElq")},null,null).exports,l=a("/ocq"),s=a("3EgV"),o=a.n(s),d=(a("7zck"),a("gJtD"),a("18Sv")),c=a.n(d),u=a("sUu7"),v=a("KS/y"),m=a.n(v),p=a("mtWM"),f=a.n(p).a.create({baseURL:"http://localhost:8000/api"}),h={name:"Login",data:function(){return{loginData:{username:"",password:""},alert:!1}},methods:{callLoginService:function(){var e=this;if(console.log("http://localhost:8000/api"),this.isFormValid()){var t=new URLSearchParams;t.append("username",this.loginData.username),t.append("password",this.loginData.password),f.post("/login",t).then(function(t){null!=t.data?(console.log(t.data),e.$session.set("basicAuthHeader",t.data),e.$router.replace("/main")):e.alert=!0}).catch(function(e){console.log(e)})}},isFormValid:function(){return this.$validator.validateAll(),this.fields.username.valid&&this.fields.password.valid}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"inspire"}},[a("v-content",[a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-alert",{attrs:{type:"error",transition:"scale-transition",dismissible:""},model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[e._v("Incorret username or password.")]),e._v(" "),a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[e._v("Login")])],1),e._v(" "),a("v-card-text",[a("v-form",[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"prepend-icon":"person",name:"username",label:"Login",type:"text","error-messages":e.errors.collect("username"),"data-vv-name":"username",required:""},model:{value:e.loginData.username,callback:function(t){e.$set(e.loginData,"username",t)},expression:"loginData.username"}}),e._v(" "),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"prepend-icon":"lock",name:"password",label:"Password",id:"password",type:"password","error-messages":e.errors.collect("password"),"data-vv-name":"password",required:""},model:{value:e.loginData.password,callback:function(t){e.$set(e.loginData,"password",t)},expression:"loginData.password"}})],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.callLoginService()}}},[e._v("Login")])],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},_=a("VU/8")(h,g,!1,null,null,null).exports,x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"main"}},[a("v-navigation-drawer",{attrs:{fixed:"",right:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},e._l(e.roles,function(t){return a("v-list-tile",{key:t.title,attrs:{"hide-overlay":""},on:{click:function(a){return e.navigateTo(t.path,t.title)}}},[a("v-list-tile-action",[a("v-icon",{attrs:{color:t.color}},[e._v(e._s(t.icon))])],1),e._v(" "),a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(t.title))])],1)],1)}),1)],1),e._v(" "),a("router-view"),e._v(" "),a("v-toolbar",{attrs:{color:"grey",dark:"",fixed:"",app:""}},[a("v-toolbar-title",[e._v(e._s(e.selectedItem))]),e._v(" "),a("v-spacer"),e._v(" "),a("v-toolbar-title",[e._v("Menu")]),e._v(" "),a("v-toolbar-side-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}})],1)],1)},staticRenderFns:[]},b=a("VU/8")({name:"MainWidget",data:function(){return{drawer:null,roles:[],selectedItem:"Home"}},methods:{navigateTo:function(e,t){this.$router.replace(e),this.selectedItem=t,this.drawer=!1}},mounted:function(){var e=this,t=this.roles.find(function(t){return t.path===e.$route.path});this.selectedItem=t.title},beforeMount:function(){this.roles=[{title:"Home",icon:"home",path:"/main/home",color:"orange"},{title:"Material Overview",icon:"import_contacts",path:"/main/materialOverview",color:"blue"},{title:"Add Material",icon:"add_circle",path:"/main/addMaterial",color:"green"},{title:"Logout",icon:"power_settings_new",path:"/",color:"red"}]}},x,!1,null,null,null).exports,w={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-footer",{attrs:{color:"grey",app:""}},[t("v-spacer"),this._v(" "),t("span",{staticClass:"white--text"},[this._v("Â© 2019")])],1)},staticRenderFns:[]},y=a("VU/8")({name:"Footer"},w,!1,null,null,null).exports,k=a("Xxa5"),C=a.n(k),F=a("Gu7T"),I=a.n(F),M=a("exGp"),D=a.n(M),U={name:"Home",data:function(){return{active:[],open:[],materials:[]}},computed:{items:function(){return[{title:"Material",children:this.materials}]},selected:function(){if(this.active.length){var e=this.active[0];return this.materials.find(function(t){return t.id===e})}}},methods:{fetchChildren:function(e){var t=this;return D()(C.a.mark(function a(){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f.get("/lecture/getAll").then(function(e){return e.data}).then(function(t){var a;return(a=e.children).push.apply(a,I()(t))}).catch(function(e){return console.warn(e)}));case 1:case"end":return t.stop()}},a,t)}))()}}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"2% 3% 5% 5%"},attrs:{id:"addMaterial"}},[a("v-card",[a("v-layout",{attrs:{"justify-space-between":"","pa-3":""}},[a("v-flex",{attrs:{xs6:""}},[a("v-treeview",{staticClass:"grey lighten-5",attrs:{active:e.active,items:e.items,"load-children":e.fetchChildren,open:e.open,activatable:"","active-class":"primary--text","open-on-click":"",transition:"","item-text":"title"},on:{"update:active":function(t){e.active=t},"update:open":function(t){e.open=t}},scopedSlots:e._u([{key:"prepend",fn:function(t){t.item;var i=t.active;return[a("v-icon",{attrs:{color:i?"primary":""}},[e._v("description")])]}}])})],1),e._v(" "),a("v-flex",{attrs:{"d-flex":"","text-xs-center":""}},[a("v-scroll-y-transition",{attrs:{mode:"out-in"}},[e.selected?a("v-card",{key:e.selected.id,staticClass:"pt-4 mx-auto",attrs:{flat:"","max-width":"400"}},[a("v-card-text",[a("h3",{staticClass:"headline mb-2"},[e._v(e._s(e.selected.title))]),e._v(" "),a("div",{staticClass:"black--text mb-2"},[e._v(e._s(e.selected.description))])]),e._v(" "),a("v-divider"),e._v(" "),a("v-layout",{attrs:{tag:"v-card-text","text-xs-center":"",wrap:""}},[e.selected.attachmentDownloadUrl?a("v-flex",{attrs:{tag:"strong",xs10:""}},[a("a",{attrs:{href:e.selected.attachmentDownloadUrl,target:"_blank"}},[e._v("Download "+e._s(e.selected.title))])]):e._e()],1)],1):a("div",{staticClass:"title grey--text text--lighten-1 font-weight-light",staticStyle:{"align-self":"center"}},[e._v("Select a lecture")])],1)],1)],1)],1)],1)},staticRenderFns:[]},S=a("VU/8")(U,$,!1,null,null,null).exports,q={name:"AddMaterial",data:function(){return{form:{title:"",description:"",attachment:null,attachmentName:"",fileDownloadUri:""},alert:{alertType:"error",alertMessage:""},visible:!1}},methods:{onFileChange:function(e){this.form.attachment=e,this.form.attachmentName=e.name},save:function(){this.isFormValid()&&(null!=this.form.attachment?this.uploadFile():this.doSave())},uploadFile:function(){var e=this,t=new FormData;t.append("file",this.form.attachment),f.post("/uploadFile",t).then(function(t){e.form.fileDownloadUri=t.data.fileDownloadUri,e.doSave()}).catch(function(t){return e.onFailure(t.message)})},doSave:function(){var e=this,t=new URLSearchParams;t.append("title",this.form.title),t.append("description",this.form.description),t.append("attachmentUrl",this.form.fileDownloadUri),f.post("/lecture/save",t).then(function(t){e.alert.alertType="success",e.alert.alertMessage="Material saved successfully",e.visible=!0}).catch(function(t){return e.onFailure(t.message)})},onFailure:function(e){console.log(e),this.alert.alertType="error",this.alert.alertMessage=e,this.alert.visible=!0},reset:function(){this.alert.visible=!1,this.$refs.form.reset(),this.$validator.reset()},isFormValid:function(){return this.$validator.validateAll(),this.fields.title.valid&&this.fields.description.valid}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"2% 3% 5% 5%"},attrs:{id:"addMaterial"}},[a("v-flex",{attrs:{xs12:"",sm8:"",md7:""}},[a("v-alert",{attrs:{type:e.alert.alertType,transition:"scale-transition",dismissible:""},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e._v(e._s(e.alert.alertMessage)+".")]),e._v(" "),a("v-card",{staticClass:"elevation-12"},[a("v-card-text",[a("v-form",{ref:"form"},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"prepend-icon":"title",name:"title",label:"Title",type:"text","error-messages":e.errors.collect("title"),"data-vv-name":"title",required:""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}}),e._v(" "),a("v-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"prepend-icon":"text_fields",name:"description",label:"Description",id:"description","error-messages":e.errors.collect("description"),"data-vv-name":"description",required:""},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),e._v(" "),a("v-text-field",{attrs:{"prepend-icon":"attachment",name:"attachment",label:"Attachment",type:"text",disabled:""},model:{value:e.form.attachmentName,callback:function(t){e.$set(e.form,"attachmentName",t)},expression:"form.attachmentName"}}),e._v(" "),a("upload-btn",{attrs:{icon:"",color:"grey",fileChangedCallback:e.onFileChange}},[a("template",{slot:"icon"},[a("v-icon",{attrs:{color:"white"}},[e._v("cloud_upload")])],1)],2)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.save()}}},[e._v("Save")]),e._v(" "),a("v-btn",{staticClass:"white--text",attrs:{color:"red"},on:{click:function(t){return e.reset()}}},[e._v("Cancel")])],1)],1)],1)],1)},staticRenderFns:[]},T=a("VU/8")(q,E,!1,null,null,null).exports,A=a("woOf"),N=a.n(A),H={name:"EditMaterialDialog",props:["dialog","editedItem","editedIndex"],computed:{formTitle:function(){return-1===this.editedIndex?"New Material":"Edit Material"}},methods:{close:function(){this.$emit("dialogCloseEvent",!1,-1),this.reset()},save:function(){this.isFormValid()&&this.$emit("dialogSaveEvent",!1,this.editedIndex,this.editedItem)},onFileChange:function(e){null!=e&&this.uploadFile(e)},uploadFile:function(e){var t=this,a=new FormData;a.append("file",e),f.post("/uploadFile",a).then(function(e){return e.data}).then(function(e){return t.$emit("dialogFileChangeEvent",e.fileDownloadUri)}).catch(function(e){return t.onFailure(e.message)})},reset:function(){this.$refs.form.reset(),this.$validator.reset()},isFormValid:function(){return this.$validator.validateAll(),this.fields.title.valid&&this.fields.description.valid}}},V={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),e._v(" "),a("v-card-text",[a("v-form",{ref:"form"},[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"prepend-icon":"title",name:"title",label:"Title",type:"text","error-messages":e.errors.collect("title"),"data-vv-name":"title",required:""},model:{value:e.editedItem.title,callback:function(t){e.$set(e.editedItem,"title",t)},expression:"editedItem.title"}}),e._v(" "),a("v-textarea",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"prepend-icon":"text_fields",name:"description",label:"Description",id:"description","error-messages":e.errors.collect("description"),"data-vv-name":"description",required:""},model:{value:e.editedItem.description,callback:function(t){e.$set(e.editedItem,"description",t)},expression:"editedItem.description"}}),e._v(" "),a("v-text-field",{attrs:{"prepend-icon":"attachment",name:"attachment",label:"Attachment",type:"text",disabled:""},model:{value:e.editedItem.attachmentDownloadUrl,callback:function(t){e.$set(e.editedItem,"attachmentDownloadUrl",t)},expression:"editedItem.attachmentDownloadUrl"}}),e._v(" "),a("upload-btn",{attrs:{icon:"",color:"grey",fileChangedCallback:e.onFileChange}},[a("template",{slot:"icon"},[a("v-icon",{attrs:{color:"white"}},[e._v("cloud_upload")])],1)],2)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:e.close}},[e._v("Cancel")]),e._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1)},staticRenderFns:[]},L={name:"MaterialOverview",components:{EditMaterialDialog:a("VU/8")(H,V,!1,null,null,null).exports},data:function(){return{dialog:!1,headers:[{text:"Title",align:"left",sortable:!0,value:"title"},{text:"Description",value:"description",sortable:!1},{text:"Attachment Link",value:"attachmentDownloadUrls[0]",sortable:!1},{text:"Actions",value:"name",sortable:!1}],materials:[],editedIndex:-1,editedItem:{id:Number,name:String,description:String,attachmentDownloadUrls:String},defaultItem:{id:null,name:"",description:"",attachmentDownloadUrls:""},alert:{alertType:"error",alertMessage:""},visible:!1}},beforeMount:function(){var e=this;f.get("/lecture/getAll").then(function(e){return e.data}).then(function(t){var a;return(a=e.materials).push.apply(a,I()(t))}).catch(function(e){return console.warn(e)})},methods:{editItem:function(e){this.editedIndex=this.materials.indexOf(e),this.editedItem=N()({},e),this.dialog=!0},deleteItem:function(e){var t=this,a=this.materials.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.materials.splice(a,1)&&f.post("/lecture/delete",e).then(function(e){return e.data}).then(function(e){t.alert.alertType="success",t.alert.alertMessage="Material deleted successfully",t.visible=!0})},dialogCloseHandler:function(e,t){this.dialog=e,this.editedItem=N()({},this.defaultItem),this.editedIndex=t},dialogSaveHandler:function(e,t,a){t>-1?(N()(this.materials[t],a),this.updateMaterial(e,t)):(this.materials.push(a),this.doSave(e,t))},updateMaterial:function(e,t){var a=this;f.post("/lecture/update",this.editedItem).then(function(i){a.alert.alertType="success",a.alert.alertMessage="Material updated successfully",a.visible=!0,a.dialogCloseHandler(e,t)}).catch(function(e){return a.onFailure(e.message)})},doSave:function(e,t){var a=this,i=new URLSearchParams;i.append("title",this.editedItem.title),i.append("description",this.editedItem.description),i.append("attachmentUrl",this.editedItem.fileDownloadUri),f.post("/lecture/save",i).then(function(i){a.alert.alertType="success",a.alert.alertMessage="Material saved successfully",a.visible=!0,a.dialogCloseHandler(e,t)}).catch(function(e){return a.onFailure(e.message)})},onFailure:function(e){console.log(e),this.alert.alertType="error",this.alert.alertMessage=e,this.alert.visible=!0},dialogFileChangeHandler:function(e){this.editedItem.attachmentDownloadUrl=e}}},R={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"2% 2% 2% 2%"}},[a("v-alert",{attrs:{type:e.alert.alertType,transition:"scale-transition",dismissible:""},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e._v(e._s(e.alert.alertMessage)+".")]),e._v(" "),a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Add, update or delete material")]),e._v(" "),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:function(t){return e.dialogCloseHandler(!0,-1)}}},[e._v("\n      New Material\n      "),a("v-icon",{attrs:{right:"",dark:""}},[e._v("add_box")])],1),e._v(" "),a("EditMaterialDialog",{attrs:{dialog:this.dialog,editedItem:this.editedItem,editedIndex:this.editedIndex},on:{dialogFileChangeEvent:e.dialogFileChangeHandler,dialogCloseEvent:e.dialogCloseHandler,dialogSaveEvent:e.dialogSaveHandler}})],1),e._v(" "),a("v-flex",{attrs:{xs13:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.materials},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.title))]),e._v(" "),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.description))]),e._v(" "),a("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.attachmentDownloadUrl))]),e._v(" "),a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return e.editItem(t.item)}}},[e._v("edit")]),e._v(" "),a("v-icon",{attrs:{small:""},on:{click:function(a){return e.deleteItem(t.item)}}},[e._v("delete")])],1)]}},{key:"no-data",fn:function(){return[a("p",[e._v("No material found")])]},proxy:!0}])})],1)],1)},staticRenderFns:[]},O=a("VU/8")(L,R,!1,null,null,null).exports;i.default.component("widgeFooter",y),i.default.use(c.a),i.default.use(u.a),i.default.use(l.a),i.default.use(o.a),i.default.use(o.a,{iconfont:"md"}),i.default.use(m.a),i.default.component("upload-btn",m.a);var P=new l.a({base:"/histoworld/",routes:[{path:"/",name:"Login",component:_},{path:"/login",name:"Login",component:_},{path:"/main",name:"MainWidget",component:b,children:[{path:"",component:S},{path:"home",component:S},{path:"addMaterial",component:T},{path:"materialOverview",component:O}]}]});i.default.config.productionTip=!1,new i.default({el:"#app",router:P,components:{App:n},template:"<App/>"})},gJtD:function(e,t){},vElq:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.204d017602c2bae4d0d0.js.map